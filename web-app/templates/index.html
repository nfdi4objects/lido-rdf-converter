{% extends 'base.html' %}
    {% block content %}
    <h3>{% block title %} X3ML Editor {% endblock %}</h3>
    <div class="accordion" id="Main">

      <div id="app">${x3ml.mappings[0].domain}$</div> 
      <button onclick="app.inc()">++</button>
      <button onclick="app.dec()">--</button>

    <script>
      async function getData() {
        try {
          const response = await fetch("./mappings")
          if (!response.ok) {
            throw new Error(`Response status: ${response.status}`);
          }

          const json = await response.json();
          return json;
        } catch (error) {
          console.error(error.message);
        }
      }
      var app = Vue.createApp({
          data() {return {counter: 5, mappings:'test2', x3ml:null}},
          // for global
          delimiters: ["${", "}$"],
          // for standalone
          compilerOptions: {
            delimiters: ["${", "}$"]
          },
          methods: {
            inc() {this.counter++; },
            dec() {this.counter--; },
            readX3ml(s) {this.x3ml = JSON.parse(s);} 
          },
          created() 
          {
            fetch("/mappings")
            .then((response) => response.json())
            .then((o) => this.readX3ml(o.data));
          }
        }).mount('#app');
    </script>  
    {% endblock %}